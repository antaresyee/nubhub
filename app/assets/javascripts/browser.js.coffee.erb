clicked = false
lastVisited = document.createElement("a")
states = {}

jQuery ->
  breadcrumbs = [$("#second_slash"), $("#third_slash")]
  for e in breadcrumbs
    e.css('display', 'none')

jQuery ->
  $('.hashchange').on('click', 'a', ->
    clicked = true
    if $(this).attr("href") == $(lastVisited).attr("href")
      clicked = false
    $(lastVisited).attr("href", $(this).attr("href"))
    $('.test').html('OKAYAJ')
    hash = location.hash
    temp = document.createElement("a")
    $(temp).attr("path", $(this).attr("path"))
    $.ajax({
      type: "GET",
      url: $(temp).attr("path"),
      dataType: "html",
      cache: false
    }).done (data) ->
      slider = $('#slider')
      states[hash] = slider.html()
      slider.css("display", "none")
      $('#slider').html('').append(data);
      $('#slider').show('slide', {direction: 'right'}, 300)
  )

jQuery ->
  $(window).hashchange ->
    if clicked
      clicked = false
    else 
      hash = location.hash
      slider = $('#slider')
      slider.css("display", "none")
      $('#slider').html('').append(states[hash]);
      $('#slider').show('slide', {direction: 'left'}, 300)
